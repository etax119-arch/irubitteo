# 요구사항 정의서

## 1. 플랫폼 구조

### 3단계 멀티테넌트 구조

```
두르비터 관리자 (1명)
    └── 기업 A
    │       ├── 직원 1
    │       ├── 직원 2
    │       └── 직원 3
    └── 기업 B
            ├── 직원 4
            └── 직원 5
```

### 사용자 역할

| 역할 | 권한 |
|------|------|
| 두르비터 관리자 | 플랫폼 전체 관리, 기업 계정 생성/관리 |
| 기업 | 소속 직원 관리, 출퇴근 현황 조회, 보고서 열람 |
| 직원 | 본인 출퇴근 기록, 업무 내용 입력 |

---

## 2. 사용자별 흐름

### 직원 흐름
1. 고유번호로 로그인
2. 출근 버튼 클릭 → 시간 기록
3. 업무 내용 입력 (선택)
4. 퇴근 버튼 클릭 → 시간 기록
5. 본인 출퇴근 이력 조회

### 기업 흐름
1. 고유번호로 로그인
2. 직원 목록 관리 (등록/수정/삭제)
3. 직원 출퇴근 현황 조회
4. 일일/주간/월간 보고서 열람
5. 결근자 확인

### 두르비터 관리자 흐름
1. 이메일/비밀번호로 로그인
2. 기업 계정 생성/관리
3. 전체 플랫폼 통계 조회
4. 시스템 설정 관리

---

## 3. 인증 방식

### 직원/기업 인증
- **고유번호 로그인**: 직원과 기업 모두 고유번호로 인증
- 비밀번호 없음 (고유번호만으로 로그인)
- 직원 고유번호 형식: `{기업코드}-{직원번호}` (예: `ABC-001`)
- 기업 고유번호 형식: `{기업코드}` (예: `ABC`)

### 두르비터 관리자 인증
- 이메일 + 비밀번호 방식
- 비밀번호 해싱 (bcrypt)

---

## 4. 직원 정보 필드

| 필드 | 필수 | 설명 |
|------|------|------|
| 이름 | O | 실명 |
| 고유번호 | O | 로그인용 (자동 생성) |
| 연락처 | O | 휴대폰 번호 |
| 주민등록번호 | O | 암호화 저장 |
| 입사일 | O | YYYY-MM-DD |
| 퇴사일 | X | 퇴사 시 입력 |
| 출근 요일 | O | 기본 월~금 [1,2,3,4,5] |
| 근무 시작 시간 | O | 기본 09:00 |
| 근무 종료 시간 | O | 기본 18:00 |
| 프로필 사진 | X | 선택 |
| 첨부 파일 | X | 계약서 등 |

---

## 5. 출퇴근 규칙

### 출근
- 출근 버튼 클릭 시 현재 시간 기록
- 하루에 1회만 출근 가능
- 지각 기준: 근무 시작 시간 이후 출근

### 퇴근
- 퇴근 버튼 클릭 시 현재 시간 기록
- 출근 기록이 있어야 퇴근 가능
- 조퇴 기준: 근무 종료 시간 이전 퇴근

### 결근 판단
- **자동 결근 처리**: 출근 요일에 출근 기록이 없으면 결근
- 기업이 직원 등록 시 출근 요일 설정 (예: 월~금 [1,2,3,4,5])
- 설정된 출근 요일에만 결근 판단 적용 (직원별로 다르게 설정 가능)
- 결근 판단 시점: 다음 날 자정 (배치 처리)

---

## 6. 업무 내용

### 업무 등록
- 출근 후 업무 내용 입력 가능
- 하루에 여러 건 등록 가능
- 필드: 제목, 내용, 시작 시간, 종료 시간 (선택)

### 업무 조회
- 직원: 본인 업무만 조회
- 기업: 소속 직원 전체 업무 조회

---

## 7. 보고서

### 보고서 종류
- 일일 보고서: 해당 날짜 출퇴근 + 업무 내용
- 주간 보고서: 주간 통계 + 업무 요약
- 월간 보고서: 월간 통계 + 결근 현황

### 보고서 형식
- PDF 다운로드 지원
- 엑셀 다운로드 지원

---

## 8. 보안 정책

### 데이터 암호화
- 주민등록번호: AES-256 암호화 저장
- 관리자 비밀번호: bcrypt 해싱
- 전송 데이터: HTTPS 필수

### 접근 제어
- 직원: 본인 데이터만 접근
- 기업: 소속 직원 데이터만 접근
- 관리자: 전체 데이터 접근

### 감사 로그
- 로그인/로그아웃 기록
- 중요 데이터 변경 기록
- 90일 보관
